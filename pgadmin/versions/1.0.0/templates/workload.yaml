kind: workload
name: {{ .Release.Name }}
description: pgadmin
tags: {}
spec:
  type: stateful
  containers:
    - name: pgadmin4
      env:
        - name: PGADMIN_DEFAULT_EMAIL
          value: 'cpln://secret/pgadmin-secret.username'
        - name: PGADMIN_DEFAULT_PASSWORD
          value: 'cpln://secret/pgadmin-secret.password'
      volumes:
        - path: /var/lib/pgadmin
          recoveryPolicy: retain
          uri: cpln://volumeset/pgadmin-vs
      image: dpage/pgadmin4
      inheritEnv: false
      cpu: '1'
      memory: 1Gi
      ports:
        - number: 80
          protocol: http
  firewallConfig:
    external:
      inboundAllowCIDR:
        - 0.0.0.0/0
  securityOptions:
    filesystemGroupId: 5050
  identityLink: //gvc/{{ .Values.global.cpln.gvc }}/identity/pgadmin-identity