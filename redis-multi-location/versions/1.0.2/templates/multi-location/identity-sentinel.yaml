{{- if .Values.locations }}
{{- $current := . }}
{{ include "calculateWorkloadCounts" $current }}
{{- $locationCount := $current.Values.global.locationCount }}
{{- range $l := until $locationCount }}
{{ $locationName := index $current.Values.locations $l }}
kind: identity
name: {{ include "redis.sentinelIdentityName" $current }}
description: Sentinel Identity
tags: {{- include "redis.tags" $current | nindent 4 }}
gvc: {{ $current.Release.Name }}-{{ $locationName }}
{{- if gt $locationCount 1 }}
---
{{- end }}
{{- end }}
{{- else }}
{{- end }}

